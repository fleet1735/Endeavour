{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Setup DSL (v0)",
  "type": "object",
  "required": ["name","indicators","entry","exit"],
  "properties": {
    "name": {"type":"string"},
    "indicators": {
      "type":"object",
      "additionalProperties": {
        "type":"object",
        "required": ["type","window","source"],
        "properties": {
          "type":{"type":"string"},
          "window":{"type":"integer","minimum":1},
          "source":{"type":"string"}
        }
      }
    },
    "entry": {
      "type":"object",
      "required":["condition","rules"],
      "properties":{
        "condition":{"enum":["AND","OR"]},
        "rules":{"type":"array","items":{
          "type":"object",
          "required":["left","op","right"],
          "properties":{
            "left":{"type":"string"},
            "op":{"enum":["crosses_above","crosses_below",">","<",">=","<=","==","!="]},
            "right":{}
          }
        }}
      }
    },
    "exit": { "$ref":"#/properties/entry" }
  }
}