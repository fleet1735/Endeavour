### 2025-09-28

- Workdir 고정 원칙: 모든 스크립트는 Git 루트에서 시작해야 함. Migration_pack.md 최상단에 원칙 반영.
- 문서 관리: Migration_pack.md, IPD.md, CHANGE_LOG.md, 프로젝트청사진.md 동시에 최신화.
- 스타일: 평문 + 인라인 코드, 한 섹션=한 스타일. 배너 자동삽입 금지.
- 인프라: Git 우선, Drive 후순위. push는 수동. PowerShell 7.5.3.
- 자동화: pre-commit 훅으로 Markdown UTF-8(BOM 없음)+LF 정규화, 25MB 초과 차단, 로그 기록.

# 🚀 Endeavour 프로젝트 청사진 (Phase별 세부내용 & 진행 현황)
_최종 갱신: 2025-09-28 (Asia/Seoul)_

---

## 0\) 프로젝트 개요
## Unified System Blueprint (2025-10-03 집대성)

### 1. 데이터 파이프라인
- 한국: pykrx (기본), korquanttools 보완.
- 해외/보편: yfinance fallback.
- 캐시 구조: `data/cache/{ticker}_{start}_{end}.csv`.

### 2. 전략 정의 계층
- JSON 스키마 기반 DSL.
- 필드: metadata, indicators[], entry/exit 조건 (AND/OR), `position_size` (기본=1.0=100%).

### 3. 백테스팅 엔진
- Phase 1~3: VectorBT (속도, 대량 검증에 적합).
- Phase 4~5: Backtrader (현실적 시뮬레이션, 포트폴리오 관리).

### 4. 분석/보고 모듈
- 공통 지표: Sharpe, MDD, CAGR, Win Rate, Profit Factor.
- 시각화: Plotly (Equity curve, Trade log).
- 리포트: QuantStats HTML.

### 5. 리스크/자본 배분
- 연구 초기: all-in 모델.
- 확장: PercentSizer, 변동성 기반 사이징.

### 6. Phase별 로드맵
- Phase 1: 데이터 파이프라인 (pykrx + yfinance fallback).
- Phase 2: JSON 전략 파서 설계.
- Phase 3: 엔진 통합 (VectorBT → Backtrader).
- Phase 4: 분석·보고 모듈 연결.
- Phase 5: 리스크 관리 및 사이징 체계화.
- 목표: **상용 프로그램 이상**의 백테스팅/리포팅 시스템
- 핵심 원칙: 철저한 재현성 / 대충-스캔 금지 / 완료·미완료 명확화 / 자동화 우선(Here-Document)
- 실행 원칙: 루트에서 `python -m src.utils.data_handler` (sys.path 조작 금지)

---

## 1) 폴더/구성 청사진
Endeavour/
├─ src/endeavour/utils/data_handler.py # 데이터 핸들러(캐시+검증+폴백)
├─ data/cache/ # 가격 데이터 캐시
├─ data/logs/ # 실행 로그
├─ reports/data_quality/ # 품질 검증 리포트(csv)
├─ docs/ # 문서(청사진/IPD/CHANGE_LOG 등)
└─ Archives/ # 참고자료/히스토리

---

## 2) 진행 현황 (체크리스트)
### Phase 1: 데이터 인프라 구축
- [x] 폴더 구조 통일(숫자 접두 제거, `data/`, `reports/`, `docs/`, `Archives/`)
- [x] `data_handler.py` **안정판** (T-1 영업일, yfinance+pykrx 폴백, 캐시/검증/리포트)
- [x] `.gitignore` 최종안 반영
- [ ] 브랜치 전략 문서화(main/dev/feature) 및 태깅 완료

### Phase 2: 백테스트 엔진
- [ ] 병렬 실행 구조 정비(parallel_runner 재정비)
- [ ] 전략 JSON 스키마 정착(검증기 포함)
- [ ] 자동 리포트(성과지표/차트/로그) 생성 파이프라인

### Phase 3: 전략 라이브러리
- [ ] 대표 전략군 확장(CANSLIM, DoubleBottom 등)
- [ ] 멀티 데이터 소스 확장(요구 시)
- [ ] 팩터/시그널 프레임워크

### Phase 4: 운영·배포
- [ ] GitHub Actions CI
- [ ] Docker 베이스 런타임
- [ ] 문서화·인수인계 체계

---

## 3) 오늘의 기준점
- 실행 성공: `data_handler FINAL FULL | 2025-09-27 (Stable ~300 lines, business-grade)`
- 기간: 2020-01-01 ~ **T-1 영업일**
- 3종 티커 rows 정상, 품질 리포트 생성 확인
### Phase1 고도화
✅ 데이터 파이프라인 안정화 (H1-1~H1-4)

### Phase2 준비
- 전략 파서(parse_strategy) 구축
- JSON 전략 정의 → 실행 함수 변환
- 병렬 백테스팅 엔진과 연결


