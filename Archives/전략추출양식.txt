{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Aura Strategy JSON Schema v1.0",
  "description": "Endeavour 프로젝트 백테스팅 엔진을 위한 정형화된 투자 전략 정의서. AI 에이전트 'Aura'는 반드시 이 Schema를 준수하는 JSON 파일만을 생성해야 한다.",
  "type": "object",
  "required": ["strategy_name", "author", "description", "indicators", "buy_conditions"],
  "properties": {
    "strategy_name": {
      "description": "전략의 고유 이름",
      "type": "string"
    },
    "author": {
      "description": "전략 작성자 (e.g., Commander & adjutant-gemini)",
      "type": "string",
      "default": "Commander & adjutant-gemini"
    },
    "description": {
      "description": "전략에 대한 상세 설명. 원본 매체의 출처 및 핵심 내용을 요약.",
      "type": "string"
    },
    "indicators": {
      "description": "전략에 사용되는 모든 기술적 지표 및 계산 필드 정의",
      "type": "array",
      "items": {
        "type": "object",
        "required": ["name", "type", "params"],
        "properties": {
          "name": {"type": "string", "description": "지표의 고유 이름 (e.g., 'MA20')"},
          "type": {"type": "string", "enum": ["SMA", "EMA", "RSI", "CALCULATION"], "description": "지표 유형"},
          "params": {"type": "object", "description": "지표 계산에 필요한 파라미터"}
        }
      }
    },
    "buy_conditions": {
      "description": "진입(매수) 조건을 정의",
      "type": "object",
      "properties": {
        "logic": {"type": "string", "enum": ["AND", "OR"], "description": "다중 조건 결합 논리"},
        "conditions": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["left", "op", "right"],
            "properties": {
              "left": {"type": "string", "description": "비교 주체 (e.g., 'Close')"},
              "op": {"type": "string", "enum": ["<", ">", "crosses_above", "crosses_below"], "description": "비교 연산자"},
              "right": {"type": "string", "description": "비교 대상 (e.g., 'LowerBand')"}
            }
          }
        }
      }
    },
    "take_profit_config": {
      "description": "이익 실현(청산) 규칙 및 최적화 설정",
      "type": "object"
    },
    "optimization_config": {
      "description": "손절매(Stop-Loss) 규칙 최적화 시나리오 설정",
      "type": "object"
    }
  }
}